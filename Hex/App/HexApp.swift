import ComposableArchitecture
import Inject
import Sparkle
import SwiftUI

@main
struct HexApp: App {
    static let appStore = Store(initialState: AppFeature.State()) {
        AppFeature()
    }

    @NSApplicationDelegateAdaptor(HexAppDelegate.self) var appDelegate

    var body: some Scene {
        WindowGroup {}.defaultLaunchBehavior(.suppressed)
            .commands {
                CommandGroup(after: .appInfo) {
                    CheckForUpdatesView()

                    Button("Settings...") {
                        appDelegate.presentSettingsView()
                    }.keyboardShortcut(",")
                }
            }
    }
}
